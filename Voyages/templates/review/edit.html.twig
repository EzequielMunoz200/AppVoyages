{% extends 'base.html.twig' %}

{% block title %} {{ parent()}} - Modifier un avis
{% endblock %}

{% block stylesheets %}

	<link rel="stylesheet" href="{{ asset('css/city_show.css') }}"/>

{% endblock %}

{% block body %}
<div class="wrapper-edit-review">
		<h1>Modifier l'avis</h1>
		<div id="form-review-container" class="col-xl-6 col-lg-6 col-md-8 col-sm-8">
			<h4 class="form-review-title">Modifiez votre avis sur
				{{ review.city.name }}
			</h4>
			{{ include('review/_form.html.twig', {'button_label': 'Valider'}) }}
		</div>
	
		<a class="mx-4" href="{{ path('review_index') }}">Retourner</a>
	
		{{ include('review/_delete_form.html.twig') }}
	
</div>

<script>

//https://medium.com/@DylanAttal/truncate-a-string-in-javascript-41f33171d5a8
function truncateString(str, num) {
    if (str.length <= num) {
        return str
    }
    return str.slice(0, num) + '...'
}

// show filename in the label of inputfile
if (document.getElementById("review_imageFile") !== null) {
    const inputElt = document.getElementById("review_imageFile");
    inputElt.addEventListener('change', function (evt) {
    let filename = evt.currentTarget.value.split("\\").pop();
    document.querySelector('.custom-file-label').textContent = truncateString(filename, 20);
    });
}
</script>
{% endblock %}
